# Mr Sleep v5.2 - UX Simplification & Polish PRD

**Version:** 5.2 (Build 7)
**Priority:** High
**Status:** In Implementation
**Created:** November 17, 2025

---

## Executive Summary

This PRD outlines a major UX simplification update for Mr Sleep v5.2, focusing on reducing visual clutter, improving onboarding flow, and enhancing performance. The changes streamline the user experience by removing unnecessary UI elements, clarifying the core value proposition, and making the app feel faster and more focused.

---

## Changes Summary

### 1. Hide Toggle During Onboarding
- **Problem:** Sleep Now/Wake Up At toggle appears during onboarding, confusing new users
- **Solution:** Hide ModeToggle when onboarding is active, show with fade-in after completion
- **File:** `SleepContainerView.swift`

### 2. Simplify Sleep Now Copy
- **Problem:** Verbose messaging clutters the interface ("current time", "wake up boss", "set your alarm", etc.)
- **Solution:** Replace with three simple lines:
  - "Sleeping right now?" (main heading)
  - "these are your best wake up times" (subtitle)
  - "click to set your alarm" (yellow CTA)
- **File:** `SingleAlarmView.swift`

### 3. Static Wake Up At Icon
- **Problem:** Rotating moon icon is distracting and identical to Sleep Now mode
- **Solution:** Use static `moon-sleeping-bed-3D-icon` with breathing animation only
- **File:** `WakeUpAtView.swift`

### 4. Faster Loading Animation
- **Problem:** Loading takes 2.3s, feels sluggish for simple calculation
- **Solution:** Reduce calculating phase from 1.5s to 1.0s (30% faster)
- **File:** `SingleAlarmView.swift`

### 5. Version Bump
- **Change:** Update to version 5.2 (build 7)
- **File:** `project.pbxproj`

---

## Implementation Details

### Feature 1: Hide Toggle During Onboarding

**Current Behavior:**
```swift
VStack(spacing: 0) {
    ModeToggle(selectedMode: $selectedMode)  // Always visible
    ZStack {
        if selectedMode == .sleepNow {
            SingleAlarmView()
        }
    }
}
```

**New Behavior:**
```swift
@State private var isOnboardingActive: Bool = false

VStack(spacing: 0) {
    if !isOnboardingActive {
        ModeToggle(selectedMode: $selectedMode)
            .transition(.opacity.combined(with: .move(edge: .top)))
    }
    ZStack {
        if selectedMode == .sleepNow {
            SingleAlarmView(isOnboardingActive: $isOnboardingActive)
        }
    }
}
```

### Feature 2: Simplify Sleep Now Copy

**Remove:**
- Current time display
- "Sleep Now" heading
- "Wake up boss you will feel refreshed"
- "Set your alarm" instructional text

**Add:**
```swift
VStack(spacing: 8) {
    Text("Sleeping right now?")
        .font(.title2)
        .fontWeight(.bold)
        .fontDesign(.rounded)
        .foregroundColor(.white)

    Text("these are your best wake up times")
        .font(.body)
        .fontWeight(.medium)
        .foregroundColor(Color(red: 0.85, green: 0.85, blue: 0.9))

    Text("click to set your alarm")
        .font(.caption)
        .fontWeight(.medium)
        .foregroundColor(Color(red: 0.894, green: 0.729, blue: 0.306))
}
```

### Feature 3: Static Wake Up At Icon

**Changes:**
1. Change icon: `"moon-3D-icon"` → `"moon-sleeping-bed-3D-icon"`
2. Remove rotation animation
3. Keep breathing animation

### Feature 4: Faster Loading Animation

**Current Timing:**
```swift
Timer.scheduledTimer(withTimeInterval: 0.05, repeats: true) { timer in
    calculationProgress += 0.0217  // ~2.3s total
}
```

**New Timing:**
```swift
Timer.scheduledTimer(withTimeInterval: 0.033, repeats: true) { timer in
    calculationProgress += 0.033  // ~1.0s calculating phase
}
```

### Feature 5: Version Bump

**Update 4 locations in project.pbxproj:**
- `MARKETING_VERSION = 5.1;` → `5.2;`
- `CURRENT_PROJECT_VERSION = 6;` → `7;`

---

## Testing Checklist

- [ ] Toggle hidden during all 3 onboarding steps
- [ ] Toggle appears smoothly after onboarding
- [ ] Simplified copy displays correctly
- [ ] Typography matches specifications
- [ ] Wake Up At uses static moon-sleeping-bed icon
- [ ] No rotation on Wake Up At icon
- [ ] Loading completes in ~2.0s total
- [ ] Progress bar fills smoothly
- [ ] Version shows 5.2 (7) in app info
- [ ] All animations respect Reduce Motion setting

---

## Success Criteria

- App feels 20% faster during wake-up time calculation
- Onboarding flow has zero distractions from mode toggle
- Sleep Now copy is direct and action-oriented
- Wake Up At mode has distinct visual identity
- Version tracking is accurate for release management

---

**End of PRD**
